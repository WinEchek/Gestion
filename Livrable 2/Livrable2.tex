\documentclass{article}
\usepackage[top=1cm, bottom=1.5cm, left=1.5cm, right=1.5cm]{geometry}
\usepackage[ansinew]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{lmodern}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{color}
\usepackage{pgf}
\usepackage{tikz}
\usepackage{url}
\usepackage{graphicx}
\usepackage{pdfpages}
\usetikzlibrary{arrows,automata}


\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{1,0,0}


\lstset{ %
  backgroundcolor=\color{white},   % choose the background color
  basicstyle=\footnotesize,        % size of fonts used for the code
  breaklines=true,                 % automatic line breaking only at whitespace
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygreen},    % comment style
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  keywordstyle=\color{blue},       % keyword style
  stringstyle=\color{mymauve},     % string literal style
	numbers=left,
	frame=leftline,
	xleftmargin=42pt
}

\title{%
    \begin{minipage}\linewidth
        \centering \bfseries
	  WinEchek
        \vskip3pt
        \large Dossier d'analyse
    \end{minipage}
}

\author{Mathis DELOGE, Antoine PETOT, Ange PICARD\\Arthur CARCHI, Lucas FOUGEROUSE, Vincent DERECLENNE}
\date{}


\begin{document}

% définition des style de puces
\renewcommand{\labelitemi}{$\bullet$}
\renewcommand{\labelitemii}{$\circ$}
\renewcommand{\labelitemiii}{$-$}
\renewcommand{\labelitemiv}{$\triangleright$}


\maketitle

\section{Diagramme des cas d'utilisation}
\includegraphics[trim = 1cm 17cm 1cm 0cm]{../CO/images/MainUseCase.pdf}
Un joueur (en ligne ou non étant donné qu'il n'y a aucune différence entre les deux, le jeu en ligne étant simplement un mode de jeu particulier) peut jouer différemment mode de jeu, pour cela, il doit au préalable créer une partie ou en reprendre une. Pour jouer l'utilisateur doit effectuer des déplacements au tour par tour, ces déplacements peuvent donner lieu à des actions différentes et modifiées l'état de la partie.

\section{Diagramme de classes}
\includegraphics[trim = 1cm 12cm 1cm 0cm]{../CO/images/MainClassDiagram.pdf}
Le modèle est une représentation d'un plateau de jeu d'échecs, c'est-à-dire qu'un plateau est composé de 64 cases chacune de celles-ci pouvant contenir une pièce ou non. (les autres types de pièces sont aussi un héritage de la classe abstraite pièce, par souci de lisibilité, nous n'en avons représenté que deux.
 
L'interface graphique implémentera des vues correspondant à chaque objet du modèle. Mais les vues utiliseront des objets décorés qui contiendront les informations relatives à l'affichage.

La partie centralise la logique concernant le jeu d'échec. Elle contient deux joueurs pouvant être de différentes natures. Le joueur en réseaux disposera des fonctionnalités nécessaires au déroulement d'une partie en ligne. l'IA fournit une interface qui en fonction d'un état du plateau renvoie un mouvement à effectuer.

Le moteur est la classe permettant de vérifier l'intégrité et l'état du plateau. Il sert aussi à effectuer les modifications(mouvements) sur celui-ci.
Le package de persistance fournit les fonctionnalités nécessaires à la sauvegarde et reprise d'une partie.

\section{Diagrammes de séquence}
\subsection{Annuler / Refaire un mouvement}
\includegraphics[trim = 1cm 18.5cm 1cm 0cm]{../CO/images/Annuler_Refaireunmouvement.pdf}
L'utilisateur demande à annuler le dernier coup effectué, l'annulation est transmise au moteur via la partie. Celui-ci annulera le coup dans le modèle et en informe la partie.

\subsection{Cliquer sur une pièce}

\includegraphics[trim = 1cm 20.5cm 1cm 0cm]{../CO/images/CliquerSurUnePiece.pdf}
L'utilisateur clique sur une pièce, la partie demande au moteur les déplacements possibles pour la pièce sélectionnée. Ensuite, la partie demande à l'interface de les afficher.

\subsection{Créer une nouvelle partie}
\includegraphics[trim = 1cm 21cm 1cm 0cm]{../CO/images/CreerUneNouvellePartie.pdf}
L'utilisateur demande à créer une nouvelle partie via l'interface graphique, celle-ci lui demande de choisir un mode de jeu. Une fois le mode choisis, une partie est créée en fonction du mode.

\subsection{Déplacer Une pièce}
\includegraphics[trim = 1cm 22cm 1cm 0cm]{../CO/images/DeplacerUnePiece.pdf}
L'utilisateur déplace une pièce sur l'interface graphique, ce déplacement est transmis à la partie qui le fait vérifier par le moteur qui met à jour le modèle et informe la partie de la réussite du déplacement.

\subsection{Héberger une partie}
\includegraphics[trim = 1cm 20cm 1cm 0cm]{../CO/images/HebergerUnePartie.pdf}
L'utilisateur demande à héberger une partie, une partie est donc créée puis ajoutée à la liste des parties disponibles en ligne.

\subsection{Jouer un tour (Humain)}
\includegraphics[trim = 1cm 20cm 1cm 0cm]{../CO/images/JouerUnTour(humain).pdf}
La partie demande au joueur d'effectuer un déplacement via l'interface graphique. Une fois le mouvement effectué, le déplacement est transmis à la partie qui le fait vérifier par le moteur qui va ensuite effectuer le déplacement sur le modèle en le mettant à jour et confirmer le déplacement à la partie.


\subsection{Jouer une partie}
\includegraphics[trim = 1cm 14cm 1cm 0cm]{../CO/images/JouerUnePartie.pdf}
La partie demande successivement aux deux joueurs d'effectuer un coup. Chaque coup est vérifié par le moteur tant que le coup n'est pas valide, le joueur est invité à réeffectuer un autre déplacement. Ce mécanisme s'interrompt quand la partie est finie.

\subsection{Mater}
\includegraphics[trim = 1cm 12cm 1cm 0cm]{../CO/images/Mater.pdf}
Une pièce a été préalablement déplacée, l'engine détecte que l'adversaire est en fait échec et mat. Il en informe la partie qu'il y a échec et mat. La graphique se met à jour et la partie se termine.

\subsection{Promouvoir un pion}
\includegraphics[trim = 1cm 21cm 1cm 0cm]{../CO/images/PromouvoirUnPion.pdf}
Une pièce à été préalablement déplacé, l'engine détecte que celui-ci était un pion et que celui-ci doit être promu. Il le fait donc savoir à la partie, celle-ci demande à l'interface d'afficher à l'utilisateur de choisir la pièce de remplacement. L'information est ensuite renvoyée à la partie qui demande au moteur d'effectuer la promotion sur le modèle.

\subsection{Rejoindre une partie}
\includegraphics[trim = 1cm 14cm 1cm 0cm]{../CO/images/RejoindreUnePartie.pdf}
L'utilisateur décide de rejoindre une partie en ligne. Une requête est effectuée sur le réseau pour trouver les parties disponibles, on les affiche ensuite à l'utilisateur afin qu'il en sélectionne une. Une fois la partie sélectionnée, le joueur se connecte et construit ensuite la partie en fonction des informations fournies. 

\subsection{Reprendre une partie}
\includegraphics[trim = 1cm 19cm 1cm 0cm]{../CO/images/ReprendreUnePartie.pdf}
L'utilisateur décide de charger une partie précédemment sauvegardée. On lui propose de sélectionner un fichier de sauvegarde. Le GameLoader implémente un système de chaîne de responsabilité pour pouvoir charger un fichier, au cas où il existe plusieurs types de sauvegardes différentes. La classe concrète construit ensuite la partie le moteur et le modèle.

\subsection{Roquer}
\includegraphics[trim = 1cm 20cm 1cm 0cm]{../CO/images/Roquer.pdf}
L'utilisateur déplace son roi sur une de ses deux tours. La graphique transmet l'information au Game à travers un RealPlayer. L'engine détermine ensuite que ce mouvement est un Roque et l'effectue.

\subsection{Sauvegarder une partie}
\includegraphics[trim = 1cm 22cm 1cm 0cm]{../CO/images/SauvegarderUnePartie.pdf}
L'utilisateur demande à l'interface de sauvegarder la partie, qui transmet le message à la partie. Celle-ci utilise un GameSaver qui sauvegardera la partie en cours grâce à une implémentation du GameSaver.
\end{document}